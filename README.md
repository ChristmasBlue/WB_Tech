WB_Tech

Видео работы сервиса: https://disk.yandex.ru/i/65BElWPlZJLJDg


Сервис позволяет получать данные по уникальному идентификатору.

Во время работы сервиса перейдя на localhost:8080 выводится статичная html страница, которая просит ввести уникальный идентификатор.
Полсе ввода и отправки сервис выполнит поиск в кэше, если в кэше отсутсвуют данные выполнит запрос к базе данных.
Если данные с введённым идентификатором существуют, то выведится страница с этими данными, если нет, то выведится сообщение с ошибкой.

Реализованы 2 сервиса.
Один отвечает за обработку данных: получение данных для добавления в БД, получение уникального идентификатора, для поиска данных в БД и отправки данных заказчику.
Второй отвечает за получение и вывод данных: получение уникального идентификатора из статичной html страницы и отправки его в брокер сообщений, получение данных по уникальному идентификатору для вывода в статичной html странице.
Брокером сообщений выступает Apache Kafka.

Сервисы и брокер сообщений можно запустить в контейнерах через Docker, база данных локальная.

Как работает сервис для вывода информации (WB_front):
    Выводит статичную html страницу, в которой нужно ввести UID.
    Получает UID и отправляет его в Apache Kafka, и ожидает ответ.
    После получения данных из брокера(в формате Json) парсит данные и сохраняет в модель.
    Вставляет данные в html шаблон и выводит страницу с данными, если данных нет, то выводит сообщение об ошибке.

Как работает сервис для обработки данных (WB_back):
    При запуске сервиса в кэш добавляются все данные из БД(считается что все данные в БД актуальные).
    Запускается консьюмер, который прослушивает топик брокера сообщений:
        При получении UID выполняется поиск в кэше, если данные присутствуют в нём, то сразу отправляются в брокер сообщений.
        Если данные с таким UID отсутсвуют в кэше, то выполняется запрос в БД.
        Если в БД данные существуют, то создаётся модель, по этой модели создаётся Json, который добавляется в кэш, и отправляется в брокер сообщений.
        Если данных не существует, то отправляется в брокер сообщений пустой Json.
    Запускается второй консьюмер, который прослушивает тот же топик брокера сообщений:
        При получении данных в виде Json, парсит и создаёт модель данных.
        Сохраняет этот Json в кэш.
        Отправляет запрос в БД для добавления новых данных из созданноый модели на основе полученного Json.

Для добавления данных в БД можно отправлять запросы на прямую в БД, либо написать сервис который будет передавать Json в брокер сообщений.

Apache Kafka работает через Kraft, ZooKeeper не нужен.
Сервисы общаются через один топик "orders", в который сообщения поступают с ключами, поэтому нет необходимости создавать другие топики, или настраивать партиции.
